<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NAMASTE-FHIR Morbidity Analytics Demo for Ministry of Ayush</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        .header {
            background: linear-gradient(45deg, #FF6B35, #F7931E);
            color: white;
            padding: 30px;
            text-align: center;
        }
        .header h1 {
            margin: 0;
            font-size: 2.5em;
            font-weight: 700;
        }
        .header p {
            margin: 10px 0 0 0;
            font-size: 1.2em;
            opacity: 0.9;
        }
        .content {
            padding: 30px;
        }
        .section {
            margin-bottom: 40px;
            background: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .section h2 {
            color: #2c3e50;
            border-bottom: 3px solid #FF6B35;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        .chart-container {
            position: relative;
            height: 400px;
            margin: 20px 0;
        }
        .api-response {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            overflow-x: auto;
            white-space: pre-wrap;
            margin: 15px 0;
        }
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .metric-card {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }
        .metric-card h3 {
            margin: 0;
            font-size: 2em;
        }
        .metric-card p {
            margin: 5px 0 0 0;
            opacity: 0.9;
        }
        .demo-button {
            background: linear-gradient(45deg, #FF6B35, #F7931E);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            margin: 10px;
            transition: transform 0.2s;
        }
        .demo-button:hover {
            transform: translateY(-2px);
        }
        .status {
            background: #27ae60;
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            display: inline-block;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üè• NAMASTE-FHIR Morbidity Analytics</h1>
            <p>Ministry of Ayush Digital Health Surveillance Dashboard</p>
            <div class="status">‚úÖ System Active - Real-time WHO ICD-11 Integration</div>
        </div>
        
        <div class="content">
            <!-- Key Metrics Section -->
            <div class="section">
                <h2>üìä Key Health Metrics</h2>
                <div class="metrics-grid">
                    <div class="metric-card">
                        <h3 id="totalPatients">50</h3>
                        <p>Total Patients Tracked</p>
                    </div>
                    <div class="metric-card">
                        <h3 id="totalDiseases">6</h3>
                        <p>Disease Categories</p>
                    </div>
                    <div class="metric-card">
                        <h3 id="totalStates">9</h3>
                        <p>States Reporting</p>
                    </div>
                    <div class="metric-card">
                        <h3>100%</h3>
                        <p>ICD-11 Mapping Coverage</p>
                    </div>
                </div>
            </div>

            <!-- Disease Distribution Chart -->
            <div class="section">
                <h2>üîç Disease Distribution Analysis</h2>
                <p>Real-time morbidity patterns across traditional Ayurvedic diagnoses with WHO ICD-11 TM2 and Biomedicine mapping</p>
                <div class="chart-container">
                    <canvas id="diseaseChart"></canvas>
                </div>
            </div>

            <!-- State-wise Distribution -->
            <div class="section">
                <h2>üó∫Ô∏è Geographic Distribution</h2>
                <div class="chart-container">
                    <canvas id="stateChart"></canvas>
                </div>
            </div>

            <!-- API Demo Section -->
            <div class="section">
                <h2>üîÑ Live API Demonstration</h2>
                <p>Interactive search for "Diabetes" (Madhumeha) showing NAMASTE‚ÜíICD-11 mapping</p>
                
                <button class="demo-button" onclick="searchDiabetes()">üîç Search "Diabetes"</button>
                <button class="demo-button" onclick="getAnalytics()">üìà Get Analytics</button>
                <button class="demo-button" onclick="lookupValueSet()">üè• ValueSet Lookup</button>

                <div id="apiResults">
                    <h3>Search Results: "Diabetes" ‚Üí "Madhumeha/Kshaudrameha"</h3>
                    <div class="api-response" id="searchResponse">{
  "query": "Diabetes",
  "total_results": 1,
  "results": [
    {
      "namaste_code": "EF-2.4.4",
      "display_name": "Madhumeha/Kshaudrameha",
      "definition": "Diabetes Mellitus",
      "mappings": {
        "icd11_tm2": "SJ00",
        "icd11_biomedicine": "5A11"
      },
      "match_info": {
        "confidence_score": 100,
        "match_type": "exact"
      }
    }
  ]
}</div>
                </div>
            </div>

            <!-- Benefits Section -->
            <div class="section">
                <h2>üéØ Ministry Benefits</h2>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div>
                        <h3>üìà Enhanced Surveillance</h3>
                        <ul>
                            <li>Real-time disease pattern tracking</li>
                            <li>Geographic morbidity mapping</li>
                            <li>Traditional medicine integration</li>
                            <li>WHO ICD-11 compliance</li>
                        </ul>
                    </div>
                    <div>
                        <h3>üîç Intelligent Search</h3>
                        <ul>
                            <li>Fuzzy matching for Sanskrit terms</li>
                            <li>Bidirectional NAMASTE‚ÜîICD-11 translation</li>
                            <li>Auto-complete suggestions</li>
                            <li>Confidence scoring</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Sample data from the API responses
        const analyticsData = {
            "by_disease": {
                "Sandhigatvata": 10,
                "Kasa": 10,
                "Vatavyadhi": 9,
                "Arsha": 9,
                "Madhumeha/Kshaudrameha": 9,
                "Jwara": 3
            },
            "by_state": {
                "Karnataka": 6,
                "Delhi": 6,
                "Uttar Pradesh": 6,
                "Maharashtra": 6,
                "Tamil Nadu": 6,
                "Kerala": 5,
                "Gujarat": 5,
                "Rajasthan": 5,
                "Haryana": 5
            }
        };

        // Disease Chart
        const diseaseCtx = document.getElementById('diseaseChart').getContext('2d');
        new Chart(diseaseCtx, {
            type: 'bar',
            data: {
                labels: Object.keys(analyticsData.by_disease),
                datasets: [{
                    label: 'Patient Count',
                    data: Object.values(analyticsData.by_disease),
                    backgroundColor: [
                        '#FF6384',
                        '#36A2EB', 
                        '#FFCE56',
                        '#4BC0C0',
                        '#9966FF',
                        '#FF9F40'
                    ],
                    borderColor: [
                        '#FF6384',
                        '#36A2EB',
                        '#FFCE56', 
                        '#4BC0C0',
                        '#9966FF',
                        '#FF9F40'
                    ],
                    borderWidth: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    title: {
                        display: true,
                        text: 'NAMASTE Disease Distribution with ICD-11 Mapping',
                        font: { size: 16 }
                    },
                    legend: {
                        display: false
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Number of Patients'
                        }
                    },
                    x: {
                        title: {
                            display: true,
                            text: 'Traditional Medicine Diagnoses'
                        }
                    }
                }
            }
        });

        // State Chart
        const stateCtx = document.getElementById('stateChart').getContext('2d');
        new Chart(stateCtx, {
            type: 'doughnut',
            data: {
                labels: Object.keys(analyticsData.by_state),
                datasets: [{
                    data: Object.values(analyticsData.by_state),
                    backgroundColor: [
                        '#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0', '#9966FF',
                        '#FF9F40', '#FF6384', '#36A2EB', '#FFCE56'
                    ]
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    title: {
                        display: true,
                        text: 'State-wise Patient Distribution',
                        font: { size: 16 }
                    },
                    legend: {
                        position: 'right'
                    }
                }
            }
        });

        // API Demo Functions
        function searchDiabetes() {
            document.getElementById('searchResponse').textContent = `{
  "query": "Diabetes",
  "total_results": 1,
  "search_parameters": {
    "limit": 5,
    "include_fuzzy": true,
    "threshold": 60
  },
  "timestamp": "${new Date().toISOString()}",
  "results": [
    {
      "namaste_code": "EF-2.4.4",
      "display_name": "Madhumeha/Kshaudrameha",
      "definition": "Diabetes Mellitus",
      "mappings": {
        "icd11_tm2": "SJ00",
        "icd11_biomedicine": "5A11"
      },
      "match_info": {
        "confidence_score": 100,
        "match_type": "exact"
      }
    }
  ]
}`;
        }

        function getAnalytics() {
            document.getElementById('searchResponse').textContent = JSON.stringify({
                "resourceType": "Observation",
                "status": "final",
                "code": {
                    "coding": [{"system": "http://ayush.gov.in", "code": "morbidity-stats"}]
                },
                "value": {
                    "by_disease": analyticsData.by_disease,
                    "by_state": analyticsData.by_state,
                    "total_patients": 50
                }
            }, null, 2);
        }

        function lookupValueSet() {
            document.getElementById('searchResponse').textContent = `{
  "resourceType": "ValueSet",
  "expansion": {
    "contains": [
      {
        "system": "http://ayush.gov.in/namaste",
        "code": "EF-2.4.4",
        "display": "Madhumeha/Kshaudrameha",
        "extension": [
          {
            "url": "icd11_tm2",
            "valueCode": "SJ00"
          },
          {
            "url": "icd11_biomed", 
            "valueCode": "5A11"
          }
        ]
      }
    ]
  }
}`;
        }
    </script>
</body>
</html>