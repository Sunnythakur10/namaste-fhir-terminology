<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Research Analytics Platform | NAMASTE-FHIR Terminology</title>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=SF+Pro+Display:wght@300;400;500;600;700;800&family=SF+Pro+Text:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet">
    <link rel="stylesheet" href="/static/assets/css/unified-design-system.css">
    <link rel="stylesheet" href="/static/assets/css/main.css">
    <link rel="stylesheet" href="/static/assets/css/extracted-inline.css">
    <!-- Chart.js for data visualization -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="/ui/assets/css/researcher-sandbox.css">
</head>
<body>
    <div class="layout-container">
        <!-- Header -->
        <header class="header">
            <div class="container">
                <div class="breadcrumb">
                    <a href="/ui/pages/landing.html" class="nav-link">Home</a>
                    <span>â†’</span>
                    <span class="body-emphasis">Research Analytics Platform</span>
                </div>
            </div>
        </header>

        <!-- Research Header -->
        <section class="research-header">
            <div class="container">
                <h1 class="display-medium headline-margin-lg">Research Analytics Platform</h1>
                <p class="body-large text-muted-90">Advanced analytics and data visualization tools for comprehensive traditional medicine research with standardized coding systems.</p>
            </div>
        </section>

        <!-- Main Content -->
        <main class="analytics-padding">
            <div class="container">
                <!-- Research Filters -->
                <div class="research-filters">
                        <h2 class="headline-large headline-margin-lg">Research Parameters & Data Filters</h2>
                    
                    <div class="filter-grid">
                        <div class="form-group">
                            <label class="form-label">Study Period</label>
                            <select class="form-select" id="study-period">
                                <option value="last-year">Last 12 Months</option>
                                <option value="last-2-years">Last 2 Years</option>
                                <option value="last-5-years">Last 5 Years</option>
                                <option value="custom">Custom Range</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Traditional Medicine Category</label>
                            <select class="form-select" id="medicine-category">
                                <option value="">All Categories</option>
                                <option value="respiratory">Respiratory Conditions</option>
                                <option value="musculoskeletal">Musculoskeletal Disorders</option>
                                <option value="endocrine">Endocrine Conditions</option>
                                <option value="digestive">Digestive Disorders</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Treatment Modality</label>
                            <select class="form-select" id="treatment-type">
                                <option value="">All Treatments</option>
                                <option value="herbal">Herbal Medicine</option>
                                <option value="panchakarma">Panchakarma</option>
                                <option value="yoga">Yoga Therapy</option>
                                <option value="combined">Combined Therapy</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Geographic Region</label>
                            <select class="form-select" id="region">
                                <option value="">All Regions</option>
                                <option value="north">Northern India</option>
                                <option value="south">Southern India</option>
                                <option value="east">Eastern India</option>
                                <option value="west">Western India</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="margin-top-lg">
                        <button class="btn btn-primary" onclick="generateResearchData()">
                            <span class="material-symbols-outlined">analytics</span>
                            Generate Research Analytics
                        </button>
                        <button class="btn btn-secondary" onclick="exportData()">
                            <span class="material-symbols-outlined">download</span>
                            Export Dataset
                        </button>
                    </div>
                </div>

                <!-- Key Metrics -->
                <div class="grid grid-cols-4 grid-gap-xl">
                    <div class="metric-card">
                        <div class="metric-value" id="total-records">--</div>
                        <div class="caption">Total Research Records</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="mapping-accuracy">--</div>
                        <div class="caption">Average Mapping Accuracy</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="treatment-outcomes">--</div>
                        <div class="caption">Positive Treatment Outcomes</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="research-coverage">--</div>
                        <div class="caption">ICD-11 Coverage</div>
                    </div>
                </div>

                <!-- Analytics Dashboard -->
                <div class="analytics-dashboard">
                    <div class="chart-container">
                        <h3 class="headline-medium headline-margin-lg">Traditional Medicine Distribution</h3>
                        <canvas id="distributionChart"></canvas>
                    </div>
                    
                    <div class="chart-container">
                        <h3 class="headline-medium headline-margin-lg">Treatment Effectiveness Trends</h3>
                        <canvas id="trendsChart"></canvas>
                    </div>
                </div>

                <!-- Research Data Table -->
                <div class="data-table">
                    <div class="table-header">
                        <h3 class="headline-medium">Detailed Research Dataset</h3>
                        <p class="caption">Comprehensive dual-coded research data with traditional and modern medical classifications</p>
                    </div>
                    
                    <div class="table-content">
                        <div id="research-table">
                            <div class="text-center-padding">
                                <span class="material-symbols-outlined icon-xxl color-text-secondary">table_view</span>
                                <p class="body-large"><strong>Research Data Ready</strong></p>
                                <p>Configure your research parameters above to generate comprehensive analytics and detailed datasets.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        let distributionChart, trendsChart;

        function generateResearchData() {
            // Update metrics with simulated data
            document.getElementById('total-records').textContent = '12,847';
            document.getElementById('mapping-accuracy').textContent = '94.2%';
            document.getElementById('treatment-outcomes').textContent = '78.5%';
            document.getElementById('research-coverage').textContent = '89.1%';

            // Generate charts
            generateDistributionChart();
            generateTrendsChart();
            generateResearchTable();
        }

        function generateDistributionChart() {
            const ctx = document.getElementById('distributionChart').getContext('2d');
            
            if (distributionChart) {
                distributionChart.destroy();
            }
            
            distributionChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Respiratory', 'Musculoskeletal', 'Endocrine', 'Digestive', 'Other'],
                    datasets: [{
                        data: [2847, 3521, 2156, 2890, 1433],
                        backgroundColor: [
                            '#007aff',
                            '#34c759',
                            '#ff9500',
                            '#ff3b30',
                            '#a1a1a6'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
        }

        function generateTrendsChart() {
            const ctx = document.getElementById('trendsChart').getContext('2d');
            
            if (trendsChart) {
                trendsChart.destroy();
            }
            
            trendsChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                    datasets: [{
                        label: 'Treatment Effectiveness (%)',
                        data: [72, 75, 78, 82, 79, 85],
                        borderColor: '#007aff',
                        backgroundColor: 'rgba(0, 122, 255, 0.1)',
                        fill: true
                    }, {
                        label: 'Mapping Accuracy (%)',
                        data: [88, 90, 92, 94, 93, 95],
                        borderColor: '#34c759',
                        backgroundColor: 'rgba(52, 199, 89, 0.1)',
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false,
                            min: 60,
                            max: 100
                        }
                    }
                }
            });
        }

        function generateResearchTable() {
            const tableDiv = document.getElementById('research-table');
            
            const sampleData = [
                {
                    condition: 'Sandhigatavata',
                    namasteCode: 'AAE-16',
                    icd11TM2: 'SP00.1',
                    icd11Bio: 'FA01.2',
                    patients: 234,
                    effectiveness: '82%',
                    confidence: '94%'
                },
                {
                    condition: 'Madhumeha',
                    namasteCode: 'EBM-23',
                    icd11TM2: 'SP15.0',
                    icd11Bio: '5A11.0',
                    patients: 198,
                    effectiveness: '76%',
                    confidence: '96%'
                },
                {
                    condition: 'Kasa',
                    namasteCode: 'RSP-08',
                    icd11TM2: 'SP22.1',
                    icd11Bio: 'CA20.0',
                    patients: 156,
                    effectiveness: '89%',
                    confidence: '89%'
                }
            ];

            let tableHTML = `
                <table class="table-full">
                    <thead>
                        <tr class="table-row-header">
                            <th class="th-padded">Traditional Condition</th>
                            <th class="th-padded">NAMASTE Code</th>
                            <th class="th-padded">ICD-11 TM2</th>
                            <th class="th-padded">ICD-11 Bio</th>
                            <th class="th-padded">Patients</th>
                            <th class="th-padded">Effectiveness</th>
                            <th class="th-padded">Confidence</th>
                        </tr>
                    </thead>
                    <tbody>
            `;

            sampleData.forEach(row => {
                tableHTML += `
                    <tr class="table-row-bordered">
                        <td class="td-strong">${row.condition}</td>
                        <td class="td-padded mono">${row.namasteCode}</td>
                        <td class="td-padded mono">${row.icd11TM2}</td>
                        <td class="td-padded mono">${row.icd11Bio}</td>
                        <td class="td-padded">${row.patients}</td>
                        <td class="td-padded td-accent">${row.effectiveness}</td>
                        <td class="td-padded td-primary">${row.confidence}</td>
                    </tr>
                `;
            });

            tableHTML += `
                    </tbody>
                </table>
            `;

            tableDiv.innerHTML = tableHTML;
        }

        function exportData() {
            alert('Research dataset export functionality would integrate with your preferred data analysis tools (CSV, Excel, R, Python).');
        }
    </script>
</body>
</html>